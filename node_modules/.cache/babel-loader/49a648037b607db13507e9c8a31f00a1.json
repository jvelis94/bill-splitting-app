{"ast":null,"code":"import _toConsumableArray from\"/Users/jvelis/code/jvelis94/bill-splitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/jvelis/code/jvelis94/bill-splitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState,useRef}from\"react\";import PersonalBill from\"./PersonalBill\";import styles from\"./GroupBill.module.css\";import SimpleTabs from\"./Tabs\";import AddIcon from'@material-ui/icons/Add';import RemoveIcon from'@material-ui/icons/Remove';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialState=[];var GroupBill=function GroupBill(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),people=_useState2[0],setPeople=_useState2[1];var _useState3=useState(0.08875),_useState4=_slicedToArray(_useState3,2),taxRate=_useState4[0],setTaxRate=_useState4[1];var _useState5=useState(.18),_useState6=_slicedToArray(_useState5,2),tipRate=_useState6[0],setTipRate=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentId=_useState8[0],setCurrentId=_useState8[1];var newPersonRef=useRef();useEffect(function(){var updatedPeople=people.map(function(person){var oldTip=person['tip'];var newTip=Math.round(100*person['subtotal']*tipRate)/100;person['tip']=newTip;person['total']=Math.round(100*(person['total']-oldTip+newTip))/100;return person;});setPeople(updatedPeople);},[tipRate]);var addItemToPerson=function addItemToPerson(name,price,personId){console.log(\"adding \".concat(name,\" to person\"));var currentPersonIndex=people.findIndex(function(person){return person.id===personId;});var currentPerson=people.filter(function(person){return person.id===personId;});currentPerson[0]['items'].push({name:name,price:parseFloat(parseInt(price)),qty:1});updateTotals(currentPerson[0],currentPersonIndex,price);};var incrementItemQuantity=function incrementItemQuantity(item,personId){var currentPersonIndex=people.findIndex(function(person){return person.id===personId;});var currentPerson=people.filter(function(person){return person.id===personId;});var updateItem=currentPerson[0]['items'].findIndex(function(el){return el.name===item;});currentPerson[0]['items'][updateItem]['qty']+=1;updateTotals(currentPerson[0],currentPersonIndex,currentPerson[0]['items'][updateItem]['price']);};var decrementItemQuantity=function decrementItemQuantity(item,personId){var currentPersonIndex=people.findIndex(function(person){return person.id===personId;});var currentPerson=people.filter(function(person){return person.id===personId;});var updateItem=currentPerson[0]['items'].findIndex(function(el){return el.name===item;});currentPerson[0]['items'][updateItem]['qty']-=1;updateTotals(currentPerson[0],currentPersonIndex,currentPerson[0]['items'][updateItem]['price'],\"minus\");};var incrementTaxRate=function incrementTaxRate(){setTipRate(function(prevState){return prevState+=0.01;});};var decrementTaxRate=function decrementTaxRate(){setTipRate(function(prevState){return prevState-=0.01;});};var updateTotals=function updateTotals(person,personIndex,price){var type=arguments.length>3&&arguments[3]!==undefined?arguments[3]:\"add\";type===\"add\"?person['subtotal']+=parseFloat(parseInt(price)):person['subtotal']-=parseFloat(parseInt(price));person['tax']=Math.round(100*person['subtotal']*taxRate)/100;person['tip']=Math.round(100*person['subtotal']*tipRate)/100;person['total']=Math.round(100*(person['subtotal']+person['tax']+person['tip']))/100;setPeople(function(prevState){var newState=_toConsumableArray(prevState);newState[personIndex]=person;return newState;});};var handleNewPersonSubmit=function handleNewPersonSubmit(event){event.preventDefault();var newPerson={id:currentId,name:newPersonRef.current.value,items:[],subtotal:0,tax:0,tip:0,total:0};setPeople(function(prevState){return[].concat(_toConsumableArray(prevState),[newPerson]);});setCurrentId(function(prevState){return prevState+=1;});newPersonRef.current.value=\"\";};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"img\",{src:\"./split_logo.png\",alt:\"logo\",style:{width:'50%'}})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleNewPersonSubmit,className:styles.newPersonContainer,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"add new person\",className:styles.formInputs,ref:newPersonRef}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",style:{display:'none'}})]}),/*#__PURE__*/_jsx(SimpleTabs,{people:people,addItemToPerson:addItemToPerson,incrementItemQuantity:incrementItemQuantity,decrementItemQuantity:decrementItemQuantity}),/*#__PURE__*/_jsxs(\"div\",{className:styles.centerActionItems,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Tip:\"}),/*#__PURE__*/_jsx(RemoveIcon,{onClick:decrementTaxRate}),Math.round(tipRate*100),\"%\",/*#__PURE__*/_jsx(AddIcon,{onClick:incrementTaxRate})]})]});};export default GroupBill;","map":{"version":3,"sources":["/Users/jvelis/code/jvelis94/bill-splitter/src/components/GroupBill.js"],"names":["useEffect","useState","useRef","PersonalBill","styles","SimpleTabs","AddIcon","RemoveIcon","initialState","GroupBill","people","setPeople","taxRate","setTaxRate","tipRate","setTipRate","currentId","setCurrentId","newPersonRef","updatedPeople","map","person","oldTip","newTip","Math","round","addItemToPerson","name","price","personId","console","log","currentPersonIndex","findIndex","id","currentPerson","filter","push","parseFloat","parseInt","qty","updateTotals","incrementItemQuantity","item","updateItem","el","decrementItemQuantity","incrementTaxRate","prevState","decrementTaxRate","personIndex","type","newState","handleNewPersonSubmit","event","preventDefault","newPerson","current","value","items","subtotal","tax","tip","total","textAlign","width","newPersonContainer","formInputs","display","centerActionItems"],"mappings":"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","sourcesContent":["import { useEffect, useState, useRef } from \"react\"\nimport PersonalBill from \"./PersonalBill\"\nimport styles from \"./GroupBill.module.css\"\nimport SimpleTabs from \"./Tabs\"\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\nconst initialState = []\n\nconst GroupBill = () => {\n    const [people, setPeople] = useState(initialState)\n    const [taxRate, setTaxRate] = useState(0.08875)\n    const [tipRate, setTipRate] = useState(.18)\n    const [currentId, setCurrentId] = useState(1)\n    const newPersonRef = useRef()\n\n    useEffect(() => {\n        const updatedPeople = people.map(person => {\n            let oldTip = person['tip']\n            let newTip = Math.round(100*(person['subtotal']) * tipRate)/100\n            person['tip'] = newTip\n            person['total'] = Math.round(100*(person['total'] - oldTip + newTip))/100\n            return person\n        })\n\n        setPeople(updatedPeople)\n\n    }, [tipRate])\n\n    const addItemToPerson = (name, price, personId) => {\n        console.log(`adding ${name} to person`)\n        let currentPersonIndex = people.findIndex(person => person.id === personId)\n        let currentPerson = people.filter(person => person.id === personId)\n        currentPerson[0]['items'].push({\n            name: name,\n            price: parseFloat(parseInt(price)),\n            qty: 1\n        })\n        updateTotals(currentPerson[0], currentPersonIndex, price)\n    }\n\n    const incrementItemQuantity = (item, personId) => {\n        let currentPersonIndex = people.findIndex(person => person.id === personId)\n        let currentPerson = people.filter(person => person.id === personId)\n        let updateItem = currentPerson[0]['items'].findIndex(el => el.name === item)\n        currentPerson[0]['items'][updateItem]['qty'] += 1\n        updateTotals(currentPerson[0], currentPersonIndex, currentPerson[0]['items'][updateItem]['price'])\n    }\n\n    const decrementItemQuantity = (item, personId) => {\n        let currentPersonIndex = people.findIndex(person => person.id === personId)\n        let currentPerson = people.filter(person => person.id === personId)\n        let updateItem = currentPerson[0]['items'].findIndex(el => el.name === item)\n        currentPerson[0]['items'][updateItem]['qty'] -= 1\n        updateTotals(currentPerson[0], currentPersonIndex, currentPerson[0]['items'][updateItem]['price'], \"minus\")\n     }\n\n\n    const incrementTaxRate = () => {\n        setTipRate(prevState => prevState += 0.01)\n    }\n\n    const decrementTaxRate = () => {\n        setTipRate(prevState => prevState -= 0.01)\n    }\n\n    const updateTotals = (person, personIndex, price, type=\"add\") => {\n        type ===\"add\" ? person['subtotal'] += parseFloat(parseInt(price)) : person['subtotal'] -= parseFloat(parseInt(price))\n        person['tax'] = Math.round(100*(person['subtotal']) * taxRate)/100\n        person['tip'] = Math.round(100*(person['subtotal']) * tipRate)/100\n        person['total'] = Math.round(100*(person['subtotal'] + person['tax'] + person['tip']))/100\n\n        setPeople(prevState => {\n            let newState = [...prevState]\n            newState[personIndex] = person\n            return newState\n        })\n    }\n\n    const handleNewPersonSubmit = (event) => {\n        event.preventDefault()\n        let newPerson = {\n            id: currentId,\n            name: newPersonRef.current.value,\n            items: [],\n            subtotal: 0,\n            tax: 0,\n            tip: 0,\n            total: 0\n        }\n        setPeople(prevState => [...prevState, newPerson])\n        setCurrentId(prevState => prevState +=1)\n        newPersonRef.current.value = \"\"\n    }\n     \n\n    return (\n        <>\n            <div style={{textAlign: 'center'}}>\n                <img src='./split_logo.png' alt='logo' style={{width: '50%'}}/>\n            </div>\n            <form onSubmit={handleNewPersonSubmit} className={styles.newPersonContainer}>\n                <input type=\"text\" name=\"name\" placeholder=\"add new person\" className={styles.formInputs} ref={newPersonRef} />\n                <input type=\"submit\" style={{display: 'none'}}/>\n            </form>\n\n            \n            <SimpleTabs \n                people={people} \n                addItemToPerson={addItemToPerson} \n                incrementItemQuantity={incrementItemQuantity}\n                decrementItemQuantity={decrementItemQuantity}\n            />\n\n            <div className={styles.centerActionItems}>\n                <h4>Tip:</h4>\n                <RemoveIcon onClick={decrementTaxRate} />\n                    {Math.round(tipRate*100)}%  \n                <AddIcon onClick={incrementTaxRate} />\n            </div>\n        </>\n    )\n}\n\nexport default GroupBill"]},"metadata":{},"sourceType":"module"}